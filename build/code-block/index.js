(()=>{"use strict";const e=window.wp.blocks,t=window.React,l=(window.wp.apiFetch,window.wp.blockEditor),a=window.wp.components,n=window.wp.element,o=window.wp.i18n;(0,e.registerBlockType)("core/code",{attributes:{content:{type:"string",source:"text",selector:"code"},language:{type:"string",selector:"code",source:"attribute",attribute:"lang"},lineNumbers:{type:"boolean"},title:{type:"string",source:"attribute",selector:"pre",attribute:"title"}},edit:({attributes:e,setAttributes:c})=>{const{colorScheme:r,content:s,language:i,lineNumbers:u,title:g}=e;(0,n.useEffect)((()=>{!i&&budhilaw_code_syntax_default_lang&&c({language:budhilaw_code_syntax_default_lang})}),[i]);const b=u?{"line-numbers":"true"}:{},d=(0,l.useBlockProps)({...b});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l.InspectorControls,{key:"controls"},(0,t.createElement)(a.PanelBody,{title:(0,o.__)("Settings")},(0,t.createElement)(a.PanelRow,null,(0,t.createElement)(a.SelectControl,{label:(0,o.__)("Language"),value:i,options:[{label:(0,o.__)("Select code language","code-syntax-block"),value:""}].concat(Object.keys(budhilaw_code_syntax_languages).map((e=>({label:budhilaw_code_syntax_languages[e],value:e})))),onChange:e=>c({language:e})})),(0,t.createElement)(a.PanelRow,null,(0,t.createElement)(a.ToggleControl,{label:(0,o.__)("Show line numbers"),checked:u,onChange:e=>c({lineNumbers:e})})),(0,t.createElement)(a.PanelRow,null,(0,t.createElement)(a.TextControl,{label:(0,o.__)("Title for Code Block","code-syntax-block"),value:g,onChange:e=>c({title:e}),placeholder:(0,o.__)("Title or File (optional)","code-syntax-block")}))),(0,t.createElement)(a.PanelBody,{title:(0,o.__)("Global Color Scheme","code-syntax-block")},(0,t.createElement)("p",null,"The global color scheme is now set in the Dashboard settings menu."))),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"wp-block budhilaw-code-syntax-block__labels"},(0,t.createElement)("span",{className:"budhilaw-code-syntax-block__label-lang"},"<",budhilaw_code_syntax_languages[i],">"),u&&(0,t.createElement)("span",{className:"budhilaw-code-syntax-block__label-line-num"},"#")),(0,t.createElement)("pre",{...d},(0,t.createElement)(l.RichText,{value:s||"",onChange:e=>c({content:e}),placeholder:(0,o.__)("Write codeâ€¦"),"aria-label":(0,o.__)("Code"),preserveWhiteSpace:!0,allowedFormats:[],withoutInteractiveFormatting:!0,__unstablePastePlainText:!0}))))},save:({attributes:e})=>{let a="";a=e.language?"language-"+e.language:"",a=e.lineNumbers?a+" line-numbers":a;const n=l.useBlockProps.save({title:e.title});return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("pre",{...n},(0,t.createElement)(l.RichText.Content,{tagName:"code",value:"string"==typeof e.content?e.content:e.content.toHTMLString({preserveWhiteSpace:!0}),lang:e.language,className:a})))}})})();